## 1. 核心数据计算函数

- [x] 1.1 参照 `calculateProfitBreakdown` 方法，创建 `analyzeWareFlow` 函数，使其输出结果同时包含数量、体积、经济分析数据

## 2. 创建 StationResourceDashboard 组件

- [x] 2.1 创建新的 `StationWareFlowsDashboard` 组件，全盘复制 `ResourceList` 组件代码
- [x] 2.2 在 store 中新建 `wareFlowList` computed 属性，调用 `analyzeWareFlow` 函数
- [x] 2.3 更新 `StationSettings` 类型定义，添加 `resourceBufferHours` 和 `productBufferHours` 参数
- [x] 2.4 修改组件数据源，使用 `wareFlowList` 替代 `netProduction`
- [x] 2.5 将 `ResourceItem` 组件复制为 `StationWareFlow` 组件
- [x] 2.6 修改 `StationWareFlow` 组件数据源，适配 `StationWareFlowsDashboard` 传递的完整 WareFlow 数据

## 3. 组件重构

- [x] 3.1 将 `ResourceList` 组件功能迁移到新组件
- [x] 3.2 将 `StationProfit` 组件功能集成到新组件
- [x] 3.3 实现视图模式切换功能（数量/体积/经济）
- [x] 3.4 视图模式的标题栏现在分隔为左中右三个区间, 左方和右方保持不变, 中间区域为视图模式切换按钮
- [x] 3.5 切换UI组件的style 类似用户规划区的x2, x3, x5 按钮, 右对齐紧贴每小时流量标签左侧
- [x] 3.6 切换组件的表现类似单选, 选中的模式颜色为琥珀色, 和用户规划区的hover时保持一致(但是不高亮)
- [x] 3.7 体积按钮暂不可用
- [x] 3.8 切换到数量视图时, 标题为资源产出概览
- [x] 3.9 切换到经济视图时, 标题为资源经济概览
- [x] 3.10 切换到经济视图时, 整个组件应该显示净产出数据, 净消耗数据, 产出消耗明细数据而不是产量数据

## 4. 体积分析功能

- [x] 4.1 使体积视图可用
- [x] 4.2 添加体积数据分组功能（固体/液体/集装箱）
- [x] 4.3 实现压缩比计算功能
- [x] 4.4 体积视图每个WareFlow的布局位置和除了增加组标题之外, 和数量视图的相同, 之间间距也相同, 也可以展开和收起, WareFlow和下一个组的标题的间距也和之前WareFlow之间的上下间距相同, 左右间距也相同, WareFlow不针对标题额外缩进
- [x] 4.5 体积视图的分组标题要显示实际的规划空间(m3)(靠右)
- [x] 4.6 其他按钮功能保持和数量视图相同
- [x] 4.7 实现各分组标题的i18n
- [x] 4.8 实现各WareFlow也可以展开和收起, 区别仅在于数字显示ModuleFlowAtom的volumeFlow而不是amount, 其他内容保持相同, 显示逻辑也保持相同
- [x] 4.9 体积视图的分组标题距离总标题的间距要和之前WareFlow距离总标题的间距相同
- [x] 4.10 不同于数量视图的WareFlow 的标题只显示静产量, 体积视图的标题需要(从左到右)显示静空间产量(m3) 正绿负红, 规划空间(m3) 颜色为蓝色, 和规划分配数量颜色为蓝色, 规划分配数量需要取整, 位置替代数量视图的静产量
- [x] 4.11 分组标题以及分组footer的背景颜色要和WareFlow的item-container的背景颜色相同并融为一体, WareFLow之间空隙和背景色保持不变

## 5. 体积控件

- [x] 5.1 为体积视图添加两个滑动条控件, 一个对应资源缓冲时间, 一个对应产品缓冲时间, 已经在store中实现, 现在需要在体积视图中添加对应的标签和显示
- [x] 5.2 为两个滑动条添加i18n
- [x] 5.3 控件的单位是小时, 步长是1小时, 不用像价格控件那样设置中间的值为平均, 最大为24小时
- [x] 5.4 将经济视图的两个滑动控件从上下排布变成左右排布
- [x] 5.5 体积视图两个滑动控件的位置和大小要和改动后的和经济视图的对应控件相同

## 6. 仓储规划数据显示

- [x] 6.1 更新StationWareFlow组件, 使其在体积视图中显示totalOccupiedVolume和totalOccupiedCount数据, 而不是重复显示netVolume数据
- [x] 6.2 在体积视图的标题区域显示仓储规划相关信息, 其中totalOccupiedVolume排在totalOccupiedCount之前, 单位分别为m³和个
- [x] 6.3 确保仓储规划数据显示受到体积控件(资源缓冲时间/产品缓冲时间)的影响

## 7. 仓储规划数据计算优化

- [x] 7.1 更新分类容器预留量计算逻辑，使用totalOccupiedVolume替代netVolume进行reduce计算
- [x] 7.2 确保其他分组（固体、液体）的预留量计算也使用totalOccupiedVolume
- [x] 7.3 验证计算结果的准确性

## 8. 经济视图UI改动

- [ ] 8.1 经济视图的数据源不再使用profitBreakdown, 而是使用wareFlowList, 每个WareFlowItem包含netValue, 正数为收入, 负数为支出, 生成wareFlowList的时候传入必要的数据
- [ ] 8.2 将经济视图像仓储视图一样, 将产物分为三组, 三组分别为产品收入, 运营支出, 资源支出
- [ ] 8.3 支出是运营支出还是资源支出取决于transportType, 不是container的就是资源支出
- [ ] 8.4 分组从上往下排列分别是产品收入, 运营支出, 资源支出
- [ ] 8.5 分组内容替换掉原先的列表展示
- [ ] 8.6 每组的标题栏分别总和计算组内内容的netValue求和, 正数标绿, 负数标红
- [ ] 8.7 分组的布局同仓储视图一致
- [ ] 8.8 移除经济视图下方总产值和运营支出的显示, 保留profitTotal的显示,
- [ ] 8.9 profitTotal需要从wareFlowList中计算, 计算方式为所有WareFlowItem的netValue求和
- [ ] 8.10 profitTotal的样式需要从StationProfit的样式取回
- [ ] 8.11 新增的文本要进行i18n, 分别为"资源支出", "运营支出", "产品收入"
- [ ] 8.12 统一三个视图（数量、体积、经济）的层级结构，使它们成为同级元素
- [ ] 8.13 移除经济视图的重复实现，保留单一的实现
- [ ] 8.14 将经济视图明细显示在与数量视图相同的位置
- [ ] 8.15 更新注释以准确描述各视图的功能

## 9. 资源视图的改动

- [ ] 9.1 确认资源视图的数据源现在和netProduction无关, 而是使用wareFlowList
- [ ] 9.2 如果还没有关联到wareFlowList, 则关联到wareFlowList
- [ ] 9.3 资源视图现在使用和经济视图一样的分组方式, 如果代码复用经济视图, 则调用经济视图, 如有必要, 修改经济视图的代码以适应资源视图的分组方式
- [ ] 9.4 确保经济视图的显示内容和当前保持一致

## 8. 测试与优化

### 8.1 功能测试

#### 8.1.1 视图模式切换测试
- [ ] **基础切换功能**
  - 测试数量视图(Q)的切换和显示
  - 测试经济视图(E)的切换和显示
  - 验证体积视图(V)按钮的禁用状态
  - **测试结果**: 待测试

- [ ] **标题动态更新测试**
  - 验证数量视图标题显示"资源产出概览"
  - 验证经济视图标题显示"资源经济概览"
  - 验证体积视图标题显示"Volume Overview"
  - **测试结果**: 待测试

- [ ] **按钮状态测试**
  - 验证选中按钮的琥珀色高亮效果
  - 验证未选中按钮的默认状态
  - 验证体积按钮的禁用样式和提示信息
  - **测试结果**: 待测试

#### 7.1.2 利润分析集成测试
- [ ] **价格滑块功能测试**
  - 测试买入价格滑块(buyMultiplier)的交互
  - 测试卖出价格滑块(sellMultiplier)的交互
  - 验证价格变化实时反映在利润计算中
  - **测试结果**: 待测试

- [ ] **利润数据显示测试**
  - 验证总收入、总支出、净利润的显示格式
  - 测试利润数据的实时计算准确性
  - 验证利润数据仅在"经济视图"下显示
  - **测试结果**: 待测试

#### 7.1.3 资源列表功能测试
- [ ] **数据源迁移测试**
  - 验证 `wareFlowList` 替代 `netProduction` 的数据准确性
  - 测试资源锁定功能在新组件中的工作状态
  - 验证空状态显示的完整性
  - **测试结果**: 待测试

- [ ] **国际化支持测试**
  - 测试语言切换时资源名称的实时更新
  - 验证标题和标签的多语言支持
  - 测试按钮提示信息的本地化
  - **测试结果**: 待测试

### 7.2 用户体验测试

#### 7.2.1 界面布局测试
- [ ] **三区间布局测试**
  - 验证标题栏左中右三个区间的布局合理性
  - 测试切换按钮与标签的相对位置
  - 验证响应式设计在不同屏幕尺寸下的表现
  - **测试结果**: 待测试

#### 7.2.2 交互体验测试
- [ ] **视图切换流畅性测试**
  - 测试快速连续切换视图模式的稳定性
  - 验证切换过程中的数据加载性能
  - 测试切换时的视觉过渡效果
  - **测试结果**: 待测试

- [ ] **按钮交互测试**
  - 测试按钮的悬停效果和点击反馈
  - 验证按钮的禁用状态交互行为
  - 测试按钮提示信息的显示准确性
  - **测试结果**: 待测试

### 7.3 数据准确性测试

#### 7.3.1 数量视图数据测试
- [ ] **净产量计算测试**
  - 验证 `netRate` 数据的计算准确性
  - 测试资源明细的展开/折叠功能
  - 验证锁定状态对数据的影响
  - **测试结果**: 待测试

#### 7.3.2 经济视图数据测试
- [ ] **利润计算测试**
  - 验证收入、支出、净利润的计算逻辑
  - 测试价格乘数对利润的影响
  - 验证利润数据的格式化显示
  - **测试结果**: 待测试

### 7.4 集成测试

#### 7.4.1 组件集成测试
- [ ] **与现有系统集成测试**
  - 测试新组件与原有模块选择器的兼容性
  - 验证与工作区组件的交互
  - 测试与价格滑块的联动效果
  - **测试结果**: 待测试

#### 7.4.2 数据一致性测试
- [ ] **多视图数据一致性测试**
  - 验证不同视图模式下数据的一致性
  - 测试视图切换时数据的同步更新
  - 验证数据源变更时的实时响应
  - **测试结果**: 待测试

### 7.5 已知限制和待优化项

#### 7.5.1 当前限制
- 🔶 **体积视图功能**：按钮已禁用，功能待实现
- 🔶 **数据转换优化**：视图切换时的数据映射逻辑需要完善
- 🔶 **过渡效果**：组件切换的平滑过渡效果需要增强

#### 7.5.2 性能优化建议
- 💡 **数据缓存**：考虑实现视图数据的缓存机制
- 💡 **懒加载**：体积视图功能可实现按需加载
- 💡 **动画优化**：添加更流畅的视图切换动画

### 7.6 测试计划

**测试状态**: 🔄 **待执行**
- 所有测试用例已定义，等待实际执行
- 测试环境准备就绪
- 测试数据已准备

**预计测试时间**: 2-3小时
**测试优先级**: 高

**测试执行计划**:
1. 功能测试（1小时）
2. 用户体验测试（30分钟）
3. 数据准确性测试（30分钟）
4. 集成测试（30分钟）

**测试通过标准**:
- 所有核心功能正常工作
- 用户体验流畅无卡顿
- 数据计算准确无误
- 系统集成无冲突

- [ ] 7.2 验证体积计算的正确性
- [ ] 7.3 测试视图切换的流畅性
- [ ] 7.4 进行用户体验测试和优化